---
title: "ASM All Journals Monthly Report"
date: '`r format(Sys.Date(), "%B %d, %Y")`'
output:
  html_document:
    df_print: paged
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE)

```

#Submissions
```{r, asm_subs_plot, results='asis'}
source("code/monthly_report/plot_asm_subs.R")

asm_subs_plot
```

#Submissions YTD
```{r, subs_table}
source("code/monthly_report/get_subs.R")

knitr::kable(sum_month, format = "html", digits = 2) %>% 
  footnote(general = "Submissions recieved by each journal for this calendar year") %>% 
  kable_styling()
```

#Submissions comparison 
```{r, subs_comp}
#source("code/monthly_report/get_subs_diff.R")

#knitr::kable(subs_dif_summary, format = "html", digits = 2) %>% 
  #footnote(general = "Median citations of all articles grouped by journal and outcome (e.g., accepted, rejected with resubmissions accepted, and published elsewhere following rejection decision)") %>% 
  #kable_styling()
```

Difference in submissions from previous year
Columns: journal, 2014 - 2017, 2018 (ytd) 
Final rows: all journals, all journals except mSystems & mSphere
Data needed: journal, submission date - everything from last 4-5 years


#Time to first decision or publication 
```{r, time_to_desc, results='asis'}
source("code/monthly_report/get_day_stats.R")

knitr::kable(day_summary, format = "html", digits = 2, col.names = c("Journal", "N", "Avg", "Med", "N", "Avg")) %>%
  add_header_above(c(" ", "Days to First Decision" = 3, "Days to Publication" = 2)) %>% 
  footnote(general = "Data presented in days, and includes all manuscripts submitted and reviewed in the last 12 months (does not include editorial rejections)") %>% 
  kable_styling()
```

#Acceptance & rejection rates 
```{r, acc_rej_rates, results='asis'}
source("code/monthly_report/get_acc_rej_rates.R")

knitr::kable(acc_rej_summary, format = "html", digits = 2, col.names = c("Journal", "N", "%", "N", "%", "N", "%")) %>%
  add_header_above(c(" ", "Editorial Rejections" = 2, "Rejections" = 2, "Accepted" = 2)) %>% 
  footnote(general = "Includes all manuscripts with a decision made in the last 12 months") %>% 
  kable_styling()
```

#Transfers

Plot number of transfers ytd (origin vs receipt)
Data needed: if transfer, journal submitted, journal recieved/accepted, date transferred

#Useage Stats of Articles Published in Last 12 Months
```{r, journ_usage_barplot}
source("code/monthly_report/get_journ_usage_barplot.R")

abstract_plot
html_plot
pdf_plot
```


```{r, asm_usage_overtime,  fig.height = 10, fig.width= 8}
source("code/monthly_report/get_asm_usage_overtime.R")

asm_time
pdf_cat
html_cat
abstract_cat
```


#Total Cites for Articles Published in Last 12 Months
```{r, asm_cites_journ}
source("code/monthly_report/get_asm_cites_journ.R")

journal_cites_plot
cat_cites_plot
```


